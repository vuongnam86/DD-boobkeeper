{"version":3,"file":"BCollapse.vue_vue_type_script_setup_true_lang-BUisG8-R.mjs","sources":["../src/components/BCollapse/BCollapse.vue"],"sourcesContent":["<template>\n  <slot name=\"header\" v-bind=\"sharedSlots\" />\n  <Transition\n    v-if=\"renderRef || contentShowing\"\n    v-bind=\"transitionProps\"\n    :enter-active-class=\"computedNoAnimation ? '' : 'collapsing'\"\n    :leave-active-class=\"computedNoAnimation ? '' : 'collapsing'\"\n    :appear=\"modelValue || props.visible\"\n  >\n    <component\n      :is=\"props.tag\"\n      v-show=\"showRef\"\n      :id=\"computedId\"\n      ref=\"_element\"\n      class=\"collapse\"\n      :class=\"computedClasses\"\n      :is-nav=\"props.isNav\"\n      v-bind=\"$attrs\"\n    >\n      <slot v-if=\"contentShowing\" v-bind=\"sharedSlots\" />\n    </component>\n  </Transition>\n  <slot name=\"footer\" v-bind=\"sharedSlots\" />\n</template>\n\n<script setup lang=\"ts\">\nimport {computed, type EmitFn, provide, readonly, toRef, useTemplateRef} from 'vue'\nimport {useDefaults} from '../../composables/useDefaults'\nimport {useId} from '../../composables/useId'\nimport {collapseInjectionKey} from '../../utils/keys'\nimport type {BCollapseProps} from '../../types/ComponentProps'\nimport type {BCollapseEmits} from '../../types/ComponentEmits'\nimport type {BCollapseSlots, ShowHideSlotsData} from '../../types/ComponentSlots'\nimport {useShowHide} from '../../composables/useShowHide'\n\ndefineOptions({\n  inheritAttrs: false,\n})\n\nconst _props = withDefaults(defineProps<Omit<BCollapseProps, 'modelValue'>>(), {\n  horizontal: false,\n  id: undefined,\n  initialAnimation: false,\n  isNav: false,\n  lazy: false,\n  noAnimation: false,\n  unmountLazy: false,\n  tag: 'div',\n  show: false,\n  visible: false,\n})\nconst props = useDefaults(_props, 'BCollapse')\nconst emit = defineEmits<BCollapseEmits>()\ndefineSlots<BCollapseSlots>()\n\nconst modelValue = defineModel<Exclude<BCollapseProps['modelValue'], undefined>>({\n  default: false,\n})\n\nconst computedId = useId(() => props.id, 'collapse')\n\nconst element = useTemplateRef<HTMLElement | null>('_element')\n\nlet inCollapse = false\nconst onEnter = (el: Element) => {\n  inCollapse = true\n  requestAnimationFrame(() => {\n    if (props.horizontal) {\n      ;(el as HTMLElement).style.width = `${(el as HTMLElement).scrollWidth}px`\n    } else {\n      ;(el as HTMLElement).style.height = `${(el as HTMLElement).scrollHeight}px`\n    }\n  })\n}\nconst onBeforeLeave = (el: Element) => {\n  if (inCollapse) {\n    return\n  }\n  if (props.horizontal) {\n    ;(el as HTMLElement).style.width = `${el.scrollWidth}px`\n  } else {\n    ;(el as HTMLElement).style.height = `${el.scrollHeight}px`\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n  ;(el as HTMLElement).offsetHeight // force reflow\n}\nconst onLeave = (el: Element) => {\n  requestAnimationFrame(() => {\n    if (props.horizontal) {\n      ;(el as HTMLElement).style.width = ``\n    } else {\n      ;(el as HTMLElement).style.height = ``\n    }\n  })\n}\n\nconst onAfterEnter = (el: Element) => {\n  ;(el as HTMLElement).style.height = ``\n  ;(el as HTMLElement).style.width = ``\n  inCollapse = false\n}\n\nconst onAfterLeave = (el: Element) => {\n  ;(el as HTMLElement).style.height = ``\n  ;(el as HTMLElement).style.width = ``\n  inCollapse = false\n}\n\nconst {\n  showRef,\n  renderRef,\n  hide,\n  show,\n  toggle,\n  isActive,\n  computedNoAnimation,\n  contentShowing,\n  transitionProps,\n} = useShowHide(modelValue, props, emit as EmitFn, element, computedId, {\n  // addShowClass: false,\n  transitionProps: {\n    onBeforeLeave,\n    onEnter,\n    onLeave,\n    onAfterEnter,\n    onAfterLeave,\n    enterToClass: '',\n    leaveToClass: '',\n    enterFromClass: '',\n    leaveFromClass: '',\n    enterActiveClass: '',\n    leaveActiveClass: '',\n  },\n})\n\nconst computedClasses = computed(() => ({\n  'show': isActive.value,\n  'navbar-collapse': props.isNav,\n  'collapse-horizontal': props.horizontal,\n}))\n\nconst sharedSlots = computed<ShowHideSlotsData>(() => ({\n  toggle,\n  show,\n  hide,\n  id: computedId.value,\n  visible: showRef.value,\n  active: isActive.value,\n}))\n\ndefineExpose({\n  hide,\n  isNav: props.isNav,\n  show,\n  toggle,\n  visible: readonly(showRef),\n})\n\nprovide(collapseInjectionKey, {\n  id: computedId,\n  hide,\n  show,\n  toggle,\n  visible: readonly(showRef),\n  isNav: toRef(() => props.isNav),\n})\n</script>\n"],"names":["_useModel","_renderSlot","_unref","_createBlock","_Transition","_mergeProps","_withDirectives","_openBlock","_resolveDynamicComponent","$attrs"],"mappings":"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"}