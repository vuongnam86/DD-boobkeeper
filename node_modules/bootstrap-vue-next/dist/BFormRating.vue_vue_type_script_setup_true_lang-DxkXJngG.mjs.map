{"version":3,"file":"BFormRating.vue_vue_type_script_setup_true_lang-DxkXJngG.mjs","sources":["../src/components/BFormRating/BFormRating.vue"],"sourcesContent":["<template>\n  <div\n    :id=\"computedId\"\n    :class=\"computedClasses\"\n    role=\"slider\"\n    :aria-valuemin=\"0\"\n    :aria-valuemax=\"clampedStars\"\n    :aria-valuenow=\"displayValue\"\n    :aria-valuetext=\"`${displayValue} of ${clampedStars}`\"\n    tabindex=\"0\"\n    @keydown=\"onKeydown\"\n  >\n    <input\n      v-if=\"props.name && !props.disabled\"\n      key=\"hidden\"\n      type=\"hidden\"\n      :name=\"props.name\"\n      :form=\"props.form\"\n      :value=\"localValue\"\n    />\n    <span\n      v-if=\"props.showClear && !props.readonly && !props.disabled\"\n      class=\"clear-button-spacing\"\n      @click=\"clearRating\"\n    >\n      <slot name=\"icon-clear\">\n        <svg\n          viewBox=\"0 0 16 16\"\n          role=\"img\"\n          aria-label=\"x\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          class=\"clear-icon\"\n        >\n          <g>\n            <path\n              d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708\"\n            />\n          </g>\n        </svg>\n      </slot>\n    </span>\n    <span\n      v-for=\"(starIndex, index) in clampedStars\"\n      :key=\"starIndex\"\n      class=\"star\"\n      @click=\"selectRating(starIndex)\"\n    >\n      <slot :star-index=\"starIndex\" :is-filled=\"isIconFull(index)\" :is-half=\"isIconHalf(index)\">\n        <span class=\"b-form-rating-star\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            :width=\"computedSize\"\n            :height=\"computedSize\"\n            fill=\"currentColor\"\n            :class=\"[iconColors[index].class]\"\n            :style=\"iconColors[index].style\"\n            class=\"star-spacing\"\n            viewBox=\"0 0 16 16\"\n          >\n            <path\n              v-if=\"isIconFull(index)\"\n              d=\"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z\"\n            />\n            <path\n              v-else-if=\"isIconHalf(index)\"\n              d=\"M5.354 5.119 7.538.792A.52.52 0 0 1 8 .5c.183 0 .366.097.465.292l2.184 4.327 4.898.696A.54.54 0 0 1 16 6.32a.55.55 0 0 1-.17.445l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256a.5.5 0 0 1-.146.05c-.342.06-.668-.254-.6-.642l.83-4.73L.173 6.765a.55.55 0 0 1-.172-.403.6.6 0 0 1 .085-.302.51.51 0 0 1 .37-.245zM8 12.027a.5.5 0 0 1 .232.056l3.686 1.894-.694-3.957a.56.56 0 0 1 .162-.505l2.907-2.77-4.052-.576a.53.53 0 0 1-.393-.288L8.001 2.223 8 2.226z\"\n            />\n            <path\n              v-else\n              d=\"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.522 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.56.56 0 0 0-.163-.505L1.71 6.745l4.052-.576a.53.53 0 0 0 .393-.288L8 2.223l1.847 3.658a.53.53 0 0 0 .393.288l4.052.575-2.906 2.77a.56.56 0 0 0-.163.506l.694 3.957-3.686-1.894a.5.5 0 0 0-.461 0z\"\n            />\n          </svg>\n        </span>\n      </slot>\n    </span>\n\n    <span\n      v-if=\"props.showValue || props.showValueMax\"\n      :style=\"{fontSize: computedSize}\"\n      class=\"rating-value-text\"\n    >\n      {{ displayValueText }}\n    </span>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {computed, ref} from 'vue'\nimport {useDefaults} from '../../composables/useDefaults'\nimport type {BFormRatingProps} from '../../types/ComponentProps'\nimport {useId} from '../../composables/useId'\nimport type {BFormRatingSlots} from '../../types'\n\nconst _props = withDefaults(defineProps<Omit<BFormRatingProps, 'modelValue'>>(), {\n  color: '',\n  id: undefined,\n  inline: false,\n  noBorder: false,\n  precision: 0,\n  readonly: false,\n  disabled: false,\n  form: undefined,\n  name: undefined,\n  showClear: false,\n  showValue: false,\n  showValueMax: false,\n  size: '1rem',\n  stars: 5,\n  variant: undefined,\n})\nconst props = useDefaults(_props, 'BFormRating')\ndefineSlots<BFormRatingSlots>()\n\nconst modelValue = defineModel<Exclude<BFormRatingProps['modelValue'], undefined>>({default: 0})\n\nconst computedId = useId(() => props.id, 'form-rating')\n\nconst computedClasses = computed(() => ({\n  'is-readonly': props.readonly,\n  'is-disabled': props.disabled,\n  'no-border': props.noBorder,\n  'b-form-rating': true,\n  'd-inline-block': props.inline,\n  'w-100': !props.inline,\n}))\n\nfunction isIconFull(index: number): boolean {\n  return displayValue.value - index >= 1\n}\n\nfunction isIconHalf(index: number): boolean {\n  const diff = displayValue.value - index\n  return diff >= 0.5 && diff < 1\n}\n\nconst hoverValue = ref<number | null>(null)\n\nconst localValue = computed({\n  get: () => modelValue.value,\n  set: (value: number) => {\n    modelValue.value = value\n  },\n})\n\nconst displayValue = computed(() =>\n  hoverValue.value !== null ? hoverValue.value : localValue.value\n)\n\n// Set the minimum amount of star can be render to 3\nconst clampedStars = computed(() => Math.max(3, props.stars))\n\nconst computedSize = computed(() => {\n  if (props.size === 'sm') return '.875rem'\n  if (props.size === 'lg') return '1.25rem'\n  return props.size\n})\n\nconst displayValueText = computed(() => {\n  const decimalValue = props.precision > 0 ? roundedValue.value : displayValue.value\n  if (props.showValueMax) {\n    return `${decimalValue}/${clampedStars.value}`\n  }\n  if (props.showValue) {\n    return `${decimalValue}`\n  }\n  return ''\n})\n\nconst roundedValue = computed(() => {\n  const val = displayValue.value\n  const factor = 10 ** props.precision\n  return Math.round((val + Number.EPSILON) * factor) / factor\n})\n\nconst iconColors = computed(() =>\n  Array.from({length: clampedStars.value}, () => {\n    if (props.disabled) {\n      return {class: 'is-disabled', style: {}}\n    }\n    if (props.variant) {\n      return {class: `text-${props.variant}`, style: {}}\n    }\n    if (props.color) {\n      return {class: '', style: {color: props.color}}\n    }\n    return {class: '', style: {}}\n  })\n)\n\n//add keyboard support\nfunction onKeydown(e: KeyboardEvent) {\n  if (props.readonly || props.disabled) return\n\n  let newValue = localValue.value\n\n  switch (e.key) {\n    case 'ArrowRight':\n    case 'ArrowUp':\n      newValue = Math.min(newValue + 1, clampedStars.value)\n      break\n    case 'ArrowLeft':\n    case 'ArrowDown':\n      newValue = Math.max(newValue - 1, 0)\n      break\n    default:\n      return\n  }\n\n  e.preventDefault()\n  localValue.value = newValue\n}\n\nfunction selectRating(starIndex: number) {\n  if (props.readonly || props.disabled) return\n  const selectedRating = hoverValue.value !== null ? hoverValue.value : starIndex\n  localValue.value = selectedRating\n}\n\n// clear\nfunction clearRating() {\n  hoverValue.value = null\n  localValue.value = 0\n}\n\ndefineExpose({\n  hoverValue,\n})\n</script>\n"],"names":["_useModel","_createElementBlock","_unref","_renderSlot","_createElementVNode","_openBlock","_Fragment","_renderList","_normalizeStyle"],"mappings":"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"}