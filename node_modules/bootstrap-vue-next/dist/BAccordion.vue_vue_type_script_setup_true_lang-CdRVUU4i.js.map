{"version":3,"file":"BAccordion.vue_vue_type_script_setup_true_lang-CdRVUU4i.js","sources":["../src/components/BAccordion/BAccordionItem.vue","../src/components/BAccordion/BAccordion.vue"],"sourcesContent":["<template>\n  <div\n    ref=\"_el\"\n    class=\"accordion-item\"\n    v-bind=\"props.wrapperAttrs\"\n    :class=\"processedAttrs.wrapperClass\"\n  >\n    <BCollapse\n      :id=\"computedId\"\n      v-model=\"modelValue\"\n      class=\"accordion-collapse\"\n      :class=\"props.collapseClass\"\n      :aria-labelledby=\"`${computedId}-heading`\"\n      v-bind=\"processedAttrs.collapseAttrs\"\n      :tag=\"props.tag\"\n      :show=\"props.show\"\n      :horizontal=\"props.horizontal\"\n      :visible=\"props.visible\"\n      :is-nav=\"props.isNav\"\n      :lazy=\"props.lazy || parentData?.lazy.value\"\n      :unmount-lazy=\"props.unmountLazy || parentData?.unmountLazy.value\"\n      @show=\"emit('show', $event)\"\n      @shown=\"emit('shown', $event)\"\n      @hide=\"emit('hide', $event)\"\n      @hidden=\"emit('hidden', $event)\"\n      @hide-prevented=\"emit('hide-prevented', $event)\"\n      @show-prevented=\"emit('show-prevented', $event)\"\n      @toggle-prevented=\"emit('toggle-prevented', $event)\"\n      @toggle=\"emit('toggle', $event)\"\n    >\n      <template #header=\"{visible: toggleVisible, toggle: slotToggle}\">\n        <component\n          :is=\"props.headerTag\"\n          :id=\"`${computedId}-heading`\"\n          class=\"accordion-header\"\n          :class=\"props.headerClass\"\n          v-bind=\"props.headerAttrs\"\n        >\n          <button\n            class=\"accordion-button\"\n            v-bind=\"props.buttonAttrs\"\n            :class=\"[{collapsed: !toggleVisible}, props.buttonClass]\"\n            type=\"button\"\n            :aria-expanded=\"toggleVisible ? 'true' : 'false'\"\n            :aria-controls=\"computedId\"\n            @click=\"slotToggle\"\n          >\n            <slot name=\"title\"> {{ props.title }} </slot>\n          </button>\n        </component>\n      </template>\n      <div class=\"accordion-body\" v-bind=\"props.bodyAttrs\" :class=\"props.bodyClass\">\n        <slot />\n      </div>\n    </BCollapse>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  computed,\n  inject,\n  nextTick,\n  onMounted,\n  onUnmounted,\n  useAttrs,\n  useTemplateRef,\n  watch,\n} from 'vue'\nimport BCollapse from '../BCollapse/BCollapse.vue'\nimport {accordionInjectionKey} from '../../utils/keys'\nimport {useDefaults} from '../../composables/useDefaults'\nimport {useId} from '../../composables/useId'\nimport type {BAccordionItemProps} from '../../types/ComponentProps'\nimport type {BAccordionItemEmits} from '../../types/ComponentEmits'\nimport type {BAccordionItemSlots} from '../../types'\n\ndefineOptions({\n  inheritAttrs: false,\n})\n\nconst _props = withDefaults(defineProps<Omit<BAccordionItemProps, 'modelValue'>>(), {\n  bodyAttrs: undefined,\n  bodyClass: undefined,\n  buttonAttrs: undefined,\n  buttonClass: undefined,\n  collapseClass: undefined,\n  headerAttrs: undefined,\n  headerClass: undefined,\n  headerTag: 'h2',\n  horizontal: undefined,\n  id: undefined,\n  isNav: undefined,\n  lazy: false,\n  unmountLazy: false,\n  tag: undefined,\n  title: undefined,\n  show: undefined,\n  visible: false,\n  wrapperAttrs: undefined,\n})\nconst props = useDefaults(_props, 'BAccordionItem')\nconst emit = defineEmits<BAccordionItemEmits>()\ndefineSlots<BAccordionItemSlots>()\nconst attrs = useAttrs()\n\nconst processedAttrs = computed(() => {\n  const {class: wrapperClass, ...collapseAttrs} = attrs\n  return {wrapperClass, collapseAttrs}\n})\n\nconst parentData = inject(accordionInjectionKey, null)\n\nconst computedId = useId(() => props.id, 'accordion_item')\n\nconst modelValue = defineModel<Exclude<BAccordionItemProps['modelValue'], undefined>>({\n  default: false,\n})\n\nif (modelValue.value) {\n  parentData?.setOpenItem(computedId.value)\n} else {\n  modelValue.value =\n    (Array.isArray(parentData?.openItem.value)\n      ? parentData?.openItem.value.includes(computedId.value)\n      : parentData?.openItem.value === computedId.value) && !parentData?.initialAnimation.value\n}\n\nconst el = useTemplateRef('_el')\nparentData?.registerAccordionItem(computedId.value, el)\n\nonUnmounted(() => {\n  parentData?.unregisterAccordionItem(computedId.value)\n})\n\nonMounted(() => {\n  if (!modelValue.value && parentData?.openItem.value === computedId.value) {\n    nextTick(() => {\n      modelValue.value = true\n    })\n  }\n})\n\nconst openInParent = computed(() =>\n  Array.isArray(parentData?.openItem.value)\n    ? parentData?.openItem.value.includes(computedId.value)\n    : parentData?.openItem.value === computedId.value\n)\n\nwatch(\n  () => parentData?.openItem.value,\n  () => (modelValue.value = openInParent.value)\n)\nwatch(modelValue, () => {\n  if (modelValue.value && !openInParent.value) {\n    parentData?.setOpenItem(computedId.value)\n  } else if (!modelValue.value && openInParent.value) {\n    parentData?.setCloseItem(computedId.value)\n  }\n})\n</script>\n","<template>\n  <div :id=\"computedId\" class=\"accordion\" :class=\"computedClasses\">\n    <slot />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  computed,\n  nextTick,\n  provide,\n  ref,\n  type ShallowRef,\n  shallowRef,\n  toRef,\n  unref,\n  type VNode,\n  watch,\n} from 'vue'\nimport {accordionInjectionKey} from '../../utils/keys'\nimport {useId} from '../../composables/useId'\nimport {useDefaults} from '../../composables/useDefaults'\nimport type {BAccordionProps} from '../../types/ComponentProps'\nimport {flattenFragments} from '../../utils/flattenFragments'\nimport BAccordionItem from './BAccordionItem.vue'\nimport {sortSlotElementsByPosition} from '../../utils/dom'\nimport type {BAccordionSlots} from '../../types'\n\nconst _props = withDefaults(defineProps<Omit<BAccordionProps, 'modelValue' | 'index'>>(), {\n  flush: false,\n  free: false,\n  initialAnimation: false,\n  id: undefined,\n  lazy: false,\n  unmountLazy: false,\n})\nconst props = useDefaults(_props, 'BAccordion')\nconst slots = defineSlots<BAccordionSlots>()\n\nconst modelValue = defineModel<BAccordionProps['modelValue']>({\n  default: undefined,\n})\n\nconst index = defineModel<BAccordionProps['index']>('index', {\n  default: undefined,\n})\n\nconst itemElementsArray = ref<VNode[]>([])\n\nconst updateItemElementsArray = () => {\n  const itemElements = flattenFragments(slots.default?.({}) ?? [])\n  itemElementsArray.value = (Array.isArray(itemElements) ? itemElements : [itemElements]).filter(\n    (item) => item.type === BAccordionItem\n  )\n}\nupdateItemElementsArray()\n\nwatch(\n  () => slots.default?.({}),\n  () => {\n    updateItemElementsArray()\n    nextTick(() => {\n      sortAccordionItems()\n    })\n  }\n)\n\ninterface AccordionItem {\n  id: string\n  el: Readonly<ShallowRef<HTMLElement | null>>\n}\n\nconst accordionItems = shallowRef<AccordionItem[]>([])\n\nconst sortAccordionItems = () => {\n  accordionItems.value = accordionItems.value.sort((a, b) =>\n    sortSlotElementsByPosition(unref(a.el), unref(b.el))\n  )\n  if (modelValue.value) {\n    if (Array.isArray(modelValue.value)) {\n      const next = modelValue.value\n        .map((id) => accordionItems.value.findIndex((item) => item.id === id))\n        .filter((i) => i !== -1)\n\n      if (next.length !== modelValue.value.length) {\n        if (process.env.NODE_ENV === 'development') {\n          // eslint-disable-next-line no-console\n          console.warn('[BAccordion] Unknown item id in v-model:', modelValue.value)\n        }\n      }\n      index.value = next\n    } else {\n      const idx = accordionItems.value.findIndex((item) => item.id === modelValue.value)\n      if (idx !== -1) index.value = idx\n    }\n  } else if (index.value !== undefined) {\n    modelValue.value = Array.isArray(index.value)\n      ? index.value.map((idx) => accordionItems.value[idx]?.id)\n      : accordionItems.value[index.value]?.id\n  }\n}\n\nconst computedId = useId(() => props.id, 'accordion')\n\nconst computedClasses = computed(() => ({\n  'accordion-flush': props.flush,\n}))\n\nconst areEqual = (a: unknown, b: unknown) => {\n  if (Array.isArray(a) && Array.isArray(b)) {\n    return a.length === b.length && a.every((item, index) => item === b[index])\n  }\n  return a === b\n}\n\nwatch(\n  () => index.value,\n  (newValue, oldValue) => {\n    if (areEqual(newValue, oldValue)) return\n    if (index.value === undefined) {\n      modelValue.value = undefined\n      return\n    }\n\n    if (!props.free) {\n      const idx = !Array.isArray(index.value) ? index.value : index.value?.[0]\n      if (accordionItems.value[idx]?.id) {\n        if (modelValue.value !== accordionItems.value[idx]?.id) {\n          modelValue.value = accordionItems.value[idx]?.id\n        }\n      } else {\n        nextTick(() => {\n          index.value = undefined\n        })\n      }\n    } else {\n      // free mode\n      if (Array.isArray(index.value)) {\n        const newValue = index.value.map((item) => accordionItems.value[item]?.id)\n        if (!areEqual(newValue, modelValue.value)) {\n          modelValue.value = newValue\n        }\n      } else {\n        const newValue = accordionItems.value[index.value]?.id\n        if (newValue === undefined) {\n          nextTick(() => {\n            index.value = undefined\n          })\n          return\n        }\n        if (!areEqual(newValue, modelValue.value)) {\n          modelValue.value = newValue\n        }\n      }\n    }\n  }\n)\n\nwatch(\n  () => modelValue.value,\n  (newValue, oldValue) => {\n    if (areEqual(newValue, oldValue)) return\n    if (modelValue.value === undefined) {\n      index.value = undefined\n      return\n    }\n\n    if (!props.free) {\n      const idx = !Array.isArray(modelValue.value)\n        ? accordionItems.value.findIndex((item) => item.id === modelValue.value)\n        : accordionItems.value.findIndex((item) => item.id === modelValue.value?.[0])\n      if (idx !== -1) {\n        if (index.value !== idx) {\n          index.value = idx\n        }\n      } else {\n        nextTick(() => {\n          modelValue.value = undefined\n        })\n      }\n    } else if (props.free) {\n      if (Array.isArray(modelValue.value)) {\n        const idxes = modelValue.value\n          .map((value) => accordionItems.value.findIndex((item) => item.id === value))\n          .filter((index) => index !== -1)\n        if (idxes.length > 0) {\n          if (!areEqual(idxes, index.value)) {\n            index.value = idxes\n          }\n        } else {\n          nextTick(() => {\n            modelValue.value = undefined\n          })\n        }\n      } else {\n        const newValue = accordionItems.value.findIndex((item) => item.id === modelValue.value)\n        if (!areEqual(newValue, index.value)) {\n          index.value = newValue\n        }\n      }\n    }\n  },\n  {deep: true}\n)\n\nwatch(\n  () => props.free,\n  (free) => {\n    if (modelValue.value) {\n      if (!free && Array.isArray(modelValue.value)) {\n        // eslint-disable-next-line prefer-destructuring\n        modelValue.value = modelValue.value[0]\n      } else if (free && !Array.isArray(modelValue.value)) {\n        modelValue.value = [modelValue.value]\n      }\n    }\n  }\n)\n\nprovide(accordionInjectionKey, {\n  openItem: toRef(() => modelValue.value),\n  free: toRef(() => props.free),\n  initialAnimation: toRef(() => props.initialAnimation),\n  lazy: toRef(() => props.lazy),\n  unmountLazy: toRef(() => props.unmountLazy),\n  setOpenItem: (id: string) => {\n    if (props.free && !Array.isArray(modelValue.value)) {\n      if (modelValue.value !== undefined) {\n        modelValue.value = [modelValue.value, id]\n      } else {\n        modelValue.value = [id]\n      }\n      return\n    }\n    if (!props.free && Array.isArray(modelValue.value)) {\n      modelValue.value = id\n      return\n    }\n    if (Array.isArray(modelValue.value)) {\n      if (!modelValue.value.includes(id)) {\n        modelValue.value = [...modelValue.value, id]\n      }\n    } else {\n      modelValue.value = id\n    }\n  },\n  setCloseItem: (id: string) => {\n    if (!props.free && Array.isArray(modelValue.value)) {\n      modelValue.value = undefined\n      return\n    }\n    if (Array.isArray(modelValue.value)) {\n      const next = modelValue.value.filter((item) => item !== id)\n      modelValue.value = next.length ? next : undefined\n    } else {\n      if (modelValue.value === id) {\n        modelValue.value = undefined\n      }\n    }\n  },\n  registerAccordionItem: (id: string, el: Readonly<ShallowRef<HTMLElement | null>>) => {\n    accordionItems.value = [...accordionItems.value, {id, el}]\n    if (accordionItems.value.length === itemElementsArray.value.length) {\n      sortAccordionItems()\n    }\n  },\n  unregisterAccordionItem: (id: string) => {\n    accordionItems.value = accordionItems.value.filter((item) => item.id !== id)\n  },\n})\n</script>\n"],"names":["_props","__props","props","useDefaults","emit","__emit","attrs","useAttrs","processedAttrs","computed","class","wrapperClass","collapseAttrs","parentData","inject","accordionInjectionKey","computedId","useId","id","modelValue","_useModel","value","setOpenItem","Array","isArray","openItem","includes","initialAnimation","el","useTemplateRef","registerAccordionItem","onUnmounted","unregisterAccordionItem","onMounted","nextTick","openInParent","watch","setCloseItem","_openBlock","_createElementBlock","_mergeProps","ref","_unref","wrapperAttrs","_createVNode","BCollapse","$event","collapseClass","tag","show","horizontal","visible","isNav","lazy","unmountLazy","onShow","_cache","onShown","onHide","onHidden","onHidePrevented","onShowPrevented","onTogglePrevented","onToggle","header","_withCtx","toggleVisible","slotToggle","_createBlock","_resolveDynamicComponent","headerTag","headerClass","headerAttrs","_createElementVNode","buttonAttrs","collapsed","buttonClass","type","onClick","_renderSlot","_ctx","_createTextVNode","_toDisplayString","title","bodyAttrs","bodyClass","$slots","slots","_useSlots","index","itemElementsArray","updateItemElementsArray","itemElements","flattenFragments","default","filter","item","BAccordionItem","sortAccordionItems","accordionItems","shallowRef","sort","a","b","sortSlotElementsByPosition","unref","next","map","findIndex","i","length","process","env","NODE_ENV","console","warn","idx","computedClasses","flush","areEqual","every","newValue","oldValue","free","idxes","deep","provide","toRef","_normalizeClass"],"mappings":"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"}