{"version":3,"file":"BFormFile.vue_vue_type_script_setup_true_lang-CM0rdpfR.js","sources":["../src/components/BFormFile/BFormFile.vue"],"sourcesContent":["<template>\n  <div ref=\"rootRef\" v-bind=\"processedAttrs.wrapperAttrs\" class=\"b-form-file-root\">\n    <!-- Optional label -->\n    <label\n      v-if=\"hasLabelSlot || props.label\"\n      class=\"form-label\"\n      :class=\"props.labelClass\"\n      :for=\"computedId\"\n    >\n      <slot name=\"label\">\n        {{ props.label }}\n      </slot>\n    </label>\n\n    <!-- Drop zone wrapper -->\n    <div\n      v-if=\"!props.plain\"\n      ref=\"dropZoneRef\"\n      class=\"b-form-file-wrapper\"\n      :class=\"{\n        'b-form-file-dragging': isOverDropZone && !props.noDrop,\n        'b-form-file-has-files': hasFiles,\n      }\"\n    >\n      <!-- Custom file control (mimics Bootstrap native input) -->\n      <div\n        class=\"b-form-file-control\"\n        :class=\"computedClasses\"\n        :aria-disabled=\"props.disabled\"\n        @click=\"handleControlClick\"\n      >\n        <!-- Custom browse button (now on LEFT to match Bootstrap v5) -->\n        <button\n          v-if=\"!props.noButton\"\n          :id=\"computedId\"\n          ref=\"browseButtonRef\"\n          type=\"button\"\n          class=\"b-form-file-button\"\n          :disabled=\"props.disabled\"\n          :aria-label=\"props.ariaLabel\"\n          :aria-labelledby=\"props.ariaLabelledby\"\n          @click.stop=\"openFileDialog\"\n        >\n          {{ effectiveBrowseText }}\n        </button>\n\n        <!-- File name display -->\n        <div class=\"b-form-file-text\">\n          <slot name=\"file-name\" :files=\"selectedFiles\" :names=\"fileNames\">\n            <span v-if=\"hasFiles\">{{ formattedFileNames }}</span>\n            <span v-else-if=\"hasPlaceholderSlot || props.placeholder\" class=\"text-muted\">\n              <slot name=\"placeholder\">{{ props.placeholder }}</slot>\n            </span>\n          </slot>\n        </div>\n      </div>\n\n      <!-- Drag overlay (only shown when dragging) -->\n      <div v-if=\"isOverDropZone && !props.noDrop\" class=\"b-form-file-drag-overlay\">\n        <slot name=\"drop-placeholder\">\n          <div class=\"b-form-file-drag-text\">\n            {{ effectiveDropPlaceholder }}\n          </div>\n        </slot>\n      </div>\n\n      <!-- Hidden input for form submission (positioned behind UI with z-index) -->\n      <input\n        ref=\"customInputRef\"\n        v-bind=\"processedAttrs.inputAttrs\"\n        type=\"file\"\n        :name=\"props.name\"\n        :form=\"props.form\"\n        :multiple=\"props.multiple || props.directory\"\n        :disabled=\"props.disabled\"\n        :required=\"props.required\"\n        :accept=\"computedAccept || undefined\"\n        :capture=\"props.capture\"\n        :directory=\"props.directory\"\n        :webkitdirectory=\"props.directory\"\n        tabindex=\"-1\"\n        aria-hidden=\"true\"\n        style=\"\n          position: absolute;\n          z-index: -5;\n          width: 0;\n          height: 0;\n          opacity: 0;\n          overflow: hidden;\n          pointer-events: none;\n        \"\n      />\n    </div>\n\n    <!-- Plain mode - simple native input -->\n    <input\n      v-else\n      :id=\"computedId\"\n      ref=\"plainInputRef\"\n      v-bind=\"processedAttrs.inputAttrs\"\n      type=\"file\"\n      :class=\"computedPlainClasses\"\n      :form=\"props.form\"\n      :name=\"props.name\"\n      :multiple=\"props.multiple || props.directory\"\n      :disabled=\"props.disabled\"\n      :capture=\"props.capture\"\n      :accept=\"computedAccept || undefined\"\n      :required=\"props.required || undefined\"\n      :aria-label=\"props.ariaLabel\"\n      :aria-labelledby=\"props.ariaLabelledby\"\n      :aria-required=\"props.required || undefined\"\n      :directory=\"props.directory\"\n      :webkitdirectory=\"props.directory\"\n      @change=\"onPlainChange\"\n    />\n\n    <!-- External file display (when showFileNames is true and not plain) -->\n    <div v-if=\"showExternalDisplay\" class=\"b-form-file-display mt-2\">\n      <slot name=\"file-name\" :files=\"selectedFiles\" :names=\"fileNames\">\n        <div v-if=\"hasFiles\" class=\"small text-muted\">\n          {{ formattedFileNames }}\n        </div>\n        <div v-else-if=\"hasPlaceholderSlot || props.placeholder\" class=\"small text-muted\">\n          <slot name=\"placeholder\">\n            {{ props.placeholder }}\n          </slot>\n        </div>\n      </slot>\n    </div>\n\n    <!-- ARIA live region for screen reader announcements -->\n    <div v-if=\"!props.plain\" class=\"visually-hidden\" aria-live=\"polite\" aria-atomic=\"true\">\n      {{ ariaLiveMessage }}\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {useDropZone, useFileDialog} from '@vueuse/core'\nimport {computed, nextTick, onMounted, ref, type Ref, useAttrs, useTemplateRef, watch} from 'vue'\nimport type {BFormFileProps} from '../../types/ComponentProps'\nimport {useDefaults} from '../../composables/useDefaults'\nimport {useId} from '../../composables/useId'\nimport {useStateClass} from '../../composables/useStateClass'\nimport {isEmptySlot} from '../../utils/dom'\nimport type {BFormFileSlots} from '../../types'\n\ndefineOptions({\n  inheritAttrs: false,\n})\n\nconst _props = withDefaults(defineProps<Omit<BFormFileProps, 'modelValue'>>(), {\n  ariaLabel: undefined,\n  ariaLabelledby: undefined,\n  accept: '',\n  autofocus: false,\n  browseText: undefined,\n  capture: undefined,\n  directory: false,\n  disabled: false,\n  dropPlaceholder: undefined,\n  fileNameFormatter: undefined,\n  form: undefined,\n  id: undefined,\n  label: '',\n  labelClass: undefined,\n  multiple: false,\n  name: undefined,\n  noButton: false,\n  noDrop: false,\n  plain: false,\n  placeholder: 'No file chosen',\n  required: false,\n  showFileNames: false,\n  size: undefined,\n  state: null,\n})\nconst props = useDefaults(_props, 'BFormFile')\nconst slots = defineSlots<BFormFileSlots>()\n\nconst emit = defineEmits<{\n  change: [value: Event]\n}>()\n\nconst modelValue = defineModel<Exclude<BFormFileProps['modelValue'], undefined>>({\n  default: null,\n})\n\nconst attrs = useAttrs()\n\nconst processedAttrs = computed(() => {\n  // In plain mode, pass all attributes to the input element\n  if (props.plain) {\n    return {\n      wrapperAttrs: {},\n      inputAttrs: attrs,\n    }\n  }\n  // In custom mode, split class/style to wrapper, rest to input\n  const {class: wrapperClass, style: wrapperStyle, ...inputAttrs} = attrs\n  const wrapperAttrs: Record<string, unknown> = {}\n  if (wrapperClass !== undefined) wrapperAttrs.class = wrapperClass\n  if (wrapperStyle !== undefined) wrapperAttrs.style = wrapperStyle\n  return {wrapperAttrs, inputAttrs}\n})\n\nconst computedId = useId(() => props.id)\nconst stateClass = useStateClass(() => props.state)\n\n// Refs\nconst rootRef = useTemplateRef('rootRef')\nconst dropZoneRef = useTemplateRef('dropZoneRef')\nconst browseButtonRef = useTemplateRef('browseButtonRef')\nconst plainInputRef = useTemplateRef<HTMLInputElement>('plainInputRef')\nconst customInputRef = useTemplateRef<HTMLInputElement>('customInputRef')\n\n// Computed accept for file type validation\nconst computedAccept = computed(() =>\n  typeof props.accept === 'string' ? props.accept : props.accept.join(',')\n)\n\n// VueUse file dialog (uses our hidden input element)\nconst {\n  open,\n  reset: resetDialog,\n  onChange: onDialogChange,\n} = useFileDialog({\n  accept: computedAccept.value,\n  multiple: props.multiple || props.directory,\n  directory: props.directory,\n  input: customInputRef as unknown as Ref<HTMLInputElement>,\n})\n\n// VueUse drop zone (replaces manual drag/drop)\n// Note: We don't pass dataTypes because the accept attribute handles validation\n// and there is no reliable way to get MIME types from in all browsers\n// https://github.com/vueuse/vueuse/issues/4523\nconst {isOverDropZone} = useDropZone(dropZoneRef, {\n  onDrop: (files) => {\n    if (files && !props.noDrop) {\n      handleFiles(files)\n    }\n  },\n  multiple: props.multiple || props.directory,\n})\n\n// Computed properties\nconst hasLabelSlot = computed(() => !isEmptySlot(slots.label))\nconst hasPlaceholderSlot = computed(() => !isEmptySlot(slots.placeholder))\n\nconst computedClasses = computed(() => [\n  stateClass.value,\n  {\n    [`form-control-${props.size}`]: props.size !== undefined,\n  },\n])\n\nconst computedPlainClasses = computed(() => [\n  'form-control',\n  stateClass.value,\n  {\n    [`form-control-${props.size}`]: props.size !== undefined,\n  },\n])\n\n// Selected files (from dialog or managed state)\nconst internalFiles = ref<readonly File[]>([])\n\nconst selectedFiles = computed<readonly File[]>(() => internalFiles.value)\n\nconst hasFiles = computed(() => selectedFiles.value.length > 0)\n\nconst fileNames = computed(() => selectedFiles.value.map((file) => file.name))\n\nconst formattedFileNames = computed(() => {\n  if (!hasFiles.value) return ''\n  if (props.fileNameFormatter) {\n    return props.fileNameFormatter(selectedFiles.value)\n  }\n  const names = fileNames.value\n  if (names.length === 1) return names[0]\n  return `${names.length} files selected`\n})\n\nconst showExternalDisplay = computed(\n  () => !props.plain && props.showFileNames && (hasFiles.value || props.placeholder)\n)\n\n// ARIA live region message for accessibility\nconst ariaLiveMessage = computed(() => {\n  if (!hasFiles.value) return ''\n  const count = selectedFiles.value.length\n  if (count === 1) {\n    return `File selected: ${selectedFiles.value[0].name}`\n  }\n  return `${count} files selected`\n})\n\nconst effectiveBrowseText = computed(() => props.browseText ?? 'Browse')\nconst effectiveDropPlaceholder = computed(() => props.dropPlaceholder ?? 'Drop files here...')\n\n// Validate file against accept criteria\nconst isFileAccepted = (file: File): boolean => {\n  if (!computedAccept.value) return true\n\n  const acceptTypes = computedAccept.value.split(',').map((type) => type.trim())\n\n  return acceptTypes.some((acceptType) => {\n    // Extension match (e.g., .pdf)\n    if (acceptType.startsWith('.')) {\n      return file.name.toLowerCase().endsWith(acceptType.toLowerCase())\n    }\n    // Exact MIME type match (e.g., image/png)\n    if (!acceptType.includes('*')) {\n      return file.type === acceptType\n    }\n    // Wildcard MIME type match (e.g., image/* or */*)\n    const slashIndex = acceptType.indexOf('/')\n    if (slashIndex === -1) {\n      // Malformed wildcard pattern (no '/'): do not match anything\n      return false\n    }\n    const category = acceptType.slice(0, slashIndex)\n    // */* should match any MIME type\n    if (category === '*') {\n      return true\n    }\n    return file.type.startsWith(`${category}/`)\n  })\n}\n\n// File handling\nconst handleFiles = (files: File[] | FileList, nativeEvent?: Event) => {\n  let fileArray: File[] = []\n\n  if (nativeEvent) {\n    // Plain mode: read from the event target (browser already filtered via accept)\n    const input = nativeEvent.target as HTMLInputElement\n    fileArray = input.files ? Array.from(input.files) : []\n  } else {\n    // Custom mode (drag & drop or file dialog): manually filter and set on hidden input\n    fileArray = Array.from(files).filter((file) => isFileAccepted(file))\n    if (customInputRef.value && typeof DataTransfer !== 'undefined') {\n      try {\n        const dataTransfer = new DataTransfer()\n        fileArray.forEach((file) => dataTransfer.items.add(file))\n        customInputRef.value.files = dataTransfer.files\n      } catch {\n        // In environments where DataTransfer is not fully supported, skip syncing files on the input\n      }\n    }\n  }\n\n  // Update internal state\n  internalFiles.value = fileArray\n\n  // Update model value\n  if (fileArray.length === 0) {\n    modelValue.value = null\n  } else if (props.directory || props.multiple) {\n    modelValue.value = fileArray\n  } else {\n    const [firstFile] = fileArray\n    modelValue.value = firstFile\n  }\n\n  // Emit change event in nextTick to ensure DOM updates\n  // In plain mode: forward the native event (has target.files)\n  // In custom mode: create CustomEvent with files in detail\n  nextTick(() => {\n    if (nativeEvent) {\n      // Plain mode: forward native event\n      emit('change', nativeEvent)\n    } else {\n      // Custom mode: create CustomEvent with files\n      const changeEvent = new CustomEvent('change', {\n        bubbles: true,\n        cancelable: false,\n        detail: {\n          files: fileArray,\n          target: {files: fileArray},\n        },\n      })\n      // Also attach files directly for easier access\n      Object.defineProperty(changeEvent, 'files', {\n        value: fileArray,\n        enumerable: true,\n      })\n      emit('change', changeEvent)\n    }\n  })\n}\n\n// Open file dialog\nconst openFileDialog = () => {\n  if (!props.disabled) {\n    open({\n      accept: computedAccept.value,\n      multiple: props.multiple || props.directory,\n      directory: props.directory,\n    })\n  }\n}\n\n// Handle click on control wrapper (make entire control clickable like Bootstrap v5)\nconst handleControlClick = () => {\n  // Don't trigger if clicking the button itself (button has its own handler with .stop)\n  // Don't trigger if disabled\n  if (!props.disabled) {\n    openFileDialog()\n  }\n}\n\n// Plain mode change handler\nconst onPlainChange = (e: Event) => {\n  const input = e.target as HTMLInputElement\n  if (input.files) {\n    handleFiles(input.files, e) // Pass native event\n  }\n}\n\n// Watch dialog files from useFileDialog\nonDialogChange((files) => {\n  if (files) {\n    handleFiles(files)\n  }\n})\n\n// Reset method\nconst reset = () => {\n  internalFiles.value = []\n  modelValue.value = null\n  resetDialog() // This resets the hidden input in custom mode\n  if (plainInputRef.value) {\n    plainInputRef.value.value = ''\n  }\n}\n\n// Focus management\nconst focus = () => {\n  if (props.plain) {\n    plainInputRef.value?.focus()\n  } else {\n    browseButtonRef.value?.focus()\n  }\n}\n\nconst blur = () => {\n  if (props.plain) {\n    plainInputRef.value?.blur()\n  } else {\n    browseButtonRef.value?.blur()\n  }\n}\n\n// Autofocus support - initial focus on mount\nonMounted(() => {\n  if (props.autofocus) {\n    nextTick(() => {\n      focus()\n    })\n  }\n})\n\n// Autofocus support - runtime prop changes\nwatch(\n  () => props.autofocus,\n  (autofocus) => {\n    if (autofocus) {\n      focus()\n    }\n  }\n)\n\n// Watch modelValue changes from parent\nwatch(modelValue, (newValue) => {\n  if (newValue === null) {\n    internalFiles.value = []\n    if (plainInputRef.value) {\n      plainInputRef.value.value = ''\n    }\n  } else if (Array.isArray(newValue)) {\n    internalFiles.value = newValue as readonly File[]\n  } else {\n    internalFiles.value = [newValue] as readonly File[]\n  }\n})\n\ndefineExpose({\n  blur,\n  element: computed(() => (props.plain ? plainInputRef.value : browseButtonRef.value)),\n  focus,\n  reset,\n})\n</script>\n"],"names":["_props","__props","props","useDefaults","slots","_useSlots","emit","__emit","modelValue","_useModel","attrs","useAttrs","processedAttrs","computed","plain","wrapperAttrs","inputAttrs","class","wrapperClass","style","wrapperStyle","computedId","useId","id","stateClass","useStateClass","state","rootRef","useTemplateRef","dropZoneRef","browseButtonRef","plainInputRef","customInputRef","computedAccept","accept","join","open","reset","resetDialog","onChange","onDialogChange","useFileDialog","value","multiple","directory","input","isOverDropZone","useDropZone","onDrop","files","noDrop","handleFiles","hasLabelSlot","isEmptySlot","label","hasPlaceholderSlot","placeholder","computedClasses","size","computedPlainClasses","internalFiles","ref","selectedFiles","hasFiles","length","fileNames","map","file","name","formattedFileNames","fileNameFormatter","names","showExternalDisplay","showFileNames","ariaLiveMessage","count","effectiveBrowseText","browseText","effectiveDropPlaceholder","dropPlaceholder","nativeEvent","fileArray","target","Array","from","filter","split","type","trim","some","acceptType","startsWith","toLowerCase","endsWith","includes","slashIndex","indexOf","category","slice","isFileAccepted","DataTransfer","dataTransfer","forEach","items","add","firstFile","nextTick","changeEvent","CustomEvent","bubbles","cancelable","detail","Object","defineProperty","enumerable","openFileDialog","disabled","handleControlClick","onPlainChange","e","focus","onMounted","autofocus","watch","newValue","isArray","__expose","blur","element","_openBlock","_createElementBlock","_mergeProps","_unref","_normalizeClass","labelClass","for","_renderSlot","_ctx","_createTextVNode","_toDisplayString","form","capture","required","ariaLabel","ariaLabelledby","webkitdirectory","_createElementVNode","onClick","noButton","_hoisted_3","_hoisted_4","$slots","_hoisted_6","_hoisted_7","_hoisted_8","tabindex","position","width","height","opacity","overflow","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14"],"mappings":"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"}